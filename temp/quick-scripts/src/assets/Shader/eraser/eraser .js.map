{"version":3,"sources":["assets\\Shader\\eraser\\eraser .ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n    @property({\r\n        type:cc.Graphics\r\n    })\r\n    _graphics = null;\r\n\r\n    @property({\r\n        type:cc.Camera\r\n    })\r\n    camera = null;\r\n\r\n    @property({\r\n        type:cc.Sprite\r\n    })\r\n    sp = null;\r\n\r\n    @property({\r\n        type:cc.Sprite\r\n    })\r\n    eraserSp = null;\r\n    // @property(cc.Label)\r\n    // label: cc.Label = null;\r\n\r\n    // @property\r\n    // text: string = 'hello';\r\n    _material = null;\r\n\r\n    @property({\r\n        type: cc.Texture2D\r\n    })\r\n    _texture = null;\r\n\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n\r\n    }\r\n\r\n    start () {\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.touchStartCallback, this, true);\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, this.touchMoveCallback, this, true);\r\n        this._texture = new cc.RenderTexture();\r\n        // 如果截图内容中不包含 Mask 组件，可以不用传递第三个参数\r\n        this._texture.initWithSize(cc.view.getViewportRect().width, cc.view.getViewportRect().height);\r\n        this.camera.getComponent(cc.Camera).targetTexture = this._texture;\r\n        this.camera.getComponent(cc.Camera).render();\r\n    }\r\n\r\n    onEnable(){\r\n    }\r\n\r\n    touchStartCallback(event){\r\n    }\r\n\r\n    touchMoveCallback(event){\r\n        let postion = this.node.convertToNodeSpaceAR(event.getLocation());\r\n\r\n        let x = event.getLocationX() / this.node.width;\r\n        let y = event.getLocationY() / this.node.height;\r\n        \r\n        //this._material.setProperty('position', cc.v2(postion.x / this.node.width, postion.y / this.node.height));\r\n        this._graphics = this.getComponent(cc.Graphics);\r\n        // this._graphics.clear();\r\n        this._graphics.circle(postion.x, postion.y, 20);\r\n        // this._graphics.moveTo(postion.x, postion.y);\r\n        this._graphics.fillColor = cc.Color.RED;\r\n        this._graphics.fill();\r\n        // console.log(postion.x + \"////\" + postion.y);\r\n        this._material = this.eraserSp.getComponent(cc.Sprite).getMaterial(0);\r\n        this._material.setProperty('mixtexture', this._texture);\r\n        this._material.setProperty('isOpen', 1.0);\r\n    }\r\n    update (dt) {\r\n    }\r\n}\r\n"]}